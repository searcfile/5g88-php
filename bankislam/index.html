<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Transaction Summary — Exact Mock</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --pink:#d84862;               /* top bar & primary (disetel agar mirip) */
    --pink-press:#c83853;
    --ink:#161616;
    --muted:#8d8d8d;
    --muted-2:#666;
    --card:#fff;
    --success:#32c9a9;
    --success-bg: rgba(50,201,169,.10);
    --shadow: 0 14px 32px rgba(0,0,0,.06);
    --shadow-btn: 0 10px 24px rgba(216,72,98,.18);
    --border: rgba(0,0,0,.06);
    --radius-xl: 22px;            /* header outer */
    --radius-card: 14px;          /* kartu putih */
    --radius-pill: 999px;
    --font: "Montserrat", Arial, sans-serif;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:#fff;font-family:var(--font);color:var(--ink)}
  .page{
    /* contoh gambar lebar ~630px; kita kunci ke 640 agar proporsional */
    max-width:510px; margin:24px auto 56px; padding:0 18px;
  }

  /* HEADER PINK ATAS */
  .topcap{
    height:54px;
    background:#fff;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  }
  .hdr{
    margin-top:-22px;             /* “menggantung” di bawah pink bar */
    display:flex; align-items:center; justify-content:space-between;
    padding:0 8px;
  }
  .hdr .title{
    font-size:14px; font-weight:700; letter-spacing:.1px;
  }
  .hdr .fav{display:flex; gap:10px; align-items:center; font-weight:700; color:#111;font-size: 14px;}
  .hdr .star{
    width:24px;height:24px;border-radius:50%;
    display:grid;place-items:center;font-size:16px;color:#111;
  }

  /* KARTU PUTIH */
  .card{
    margin-top:10px !important; background:var(--card); border-radius:var(--radius-card);
    padding:18px 20px; box-shadow:var(--shadow); border:1px solid var(--border);
  }
  .edit{
    position:absolute; right:18px; margin-top:-6px;
    background:transparent; border:0; cursor:pointer; color:#9a9a9a; font-size:18px;
  }

  .row-top{ display:flex; align-items:flex-start; justify-content:space-between; gap:14px; }
  .left{ flex:1; }
  .type{ font-weight:700; font-size:14px; color:#111; display:inline-block; }
  .badge{
    display:inline-flex; align-items:center; gap:6px; margin-left:13px;
    font-size:10px; color:#32c9a9;
    background:#fff; border:1px solid #32c9a9;
    padding:2px 12px; border-radius:8px;font-weight:500;
  }

  .amount{ min-width:140px; text-align:right; }
  .amount .rm{ color:#000; font-weight:700; font-size:14px; letter-spacing:.1px; }

  .refwrap{
    margin-top:10px; display:flex; justify-content:space-between; gap:10px;
  }
  .refleft{ color:var(--muted); font-size:13px; line-height:1.5; }
  .view{ color:#c13650; font-weight:600; font-size:13px; cursor:pointer; white-space:nowrap; }

  hr{ border:0;margin:14px 0 12px; }

  .sect{ font-weight:700; font-size:14px; color:#111; margin-bottom:8px; }
  .detail{ font-size:12px; color:#6b6b6b; line-height:1.5; }
  .detail .sub{ color:#6b6b6b; font-weight:400; }

  .more{ margin-top:10px; color:#8d8d8d; font-size:10px; cursor:pointer; display:inline-flex; gap:8px; align-items:center;font-weight: 600; }

  /* FOOTER BUTTONS */
  .actions{
    margin-top:18px; display:flex; gap:18px;
  }
  .btn{
    flex:1; padding:12px 22px; border-radius:var(--radius-pill);
    border:1px solid var(--border); cursor:pointer; font-weight:700; font-size:14px;
    background:#fff; color:#1a1a1a;
    box-shadow: 0 2px 0 rgba(0,0,0,.02), 0 6px 14px rgba(0,0,0,.06) inset;
  }
  .btn.primary{
    flex:1; background:linear-gradient(180deg,var(--pink),var(--pink-press));
    color:#fff; border:1px solid var(--border); box-shadow:var(--shadow-btn);
  }

  /* MODAL EDITOR */

  .modal{ width:min(520px,92vw); background:#fff; border-radius:14px; border:1px solid var(--border);
          padding:16px 16px 14px; box-shadow:0 18px 40px rgba(0,0,0,.18); }
  .modal h3{ margin:0 0 12px 0; font-size:16px; }
  .fld{ display:flex; flex-direction:column; gap:6px; margin-bottom:10px; }
  .row{ display:flex; gap:10px; }
  .col{ flex:1; }
  .fld label{ font-weight:600; }
  .fld input, .fld select{
    border:1px solid var(--border); border-radius:9px; padding:10px 12px; font-size:14px;
  }
  .ctl{ display:flex; justify-content:flex-end; gap:8px; margin-top:8px; }
  .gear{ position:relative; top:-6px; }

  /* BLUR MASKING */
  .blurred{ filter:blur(2px); transition:filter .25s ease; }
  .initial{ font-weight:400;  }

  @media (max-width:640px){
    .amount{ text-align:left; min-width:auto; }
    .actions{ flex-direction:column; }
  }
/* reference row exactly like screenshot */
.refblock{ margin-top:10px; }
.ref-line{
  display:flex;
  justify-content:space-between;
  align-items:center;    /* sejajar secara vertikal */
  gap:12px;
}
.ref-left{
  color:#6b6b6b;         /* muted */
  font-size:12px;
  line-height:1.5;
}
.view-receipt{
  color:#c13650;         /* merah muda seperti contoh */
  font-size:13px;
  white-space:nowrap;    /* biar tidak turun baris */
  cursor:pointer;
  text-decoration: none;
}
.ref-date{
  color:#6b6b6b;
  font-size:12px;        /* tanggal di baris kedua */
}
.right-col{
  display:flex;
  flex-direction:column;
  align-items:flex-end; /* rata kanan */
  gap:6px;              /* jarak antara amount & link */
  min-width:140px;      /* konsisten dengan lebar amount */
}
.right-col{ position: relative; }
.right-col .view-receipt{
  position: relative;
  top: 8px;      /* ↓ turun dikit */
  right: 7px;   /* → geser lebih ke kanan (nilai + untuk makin ke kanan) */
}
.left > div:first-child{
  display: flex;
  align-items: center;   /* sejajar tengah */
}

/* (opsional pixel-perfect) */
.badge{ transform: translateY(1px); } 
.card{ position: relative; overflow: visible; }
.edit{
  position: absolute;
  top: -12px;            /* nilai negatif = keluar ke atas */
  right: -12px;          /* keluar ke kanan */
  margin: 0;
  z-index: 5;
}

/* Sembunyikan tombol gear kalau masih ada di HTML */
.edit{ display:none !important; }



/* Sejajarkan "Fund Transfer" dan badge Success */
.left > div:first-child{
  display:flex;
  align-items:center;
}
/* 1) Halaman tetap sempit & center untuk resit */
.page{
  max-width: 510px;     /* biarkan seperti awal */
  margin: 24px auto 56px;
}

/* 5) Sembunyikan tombol gear (kalau masih ada) */
.edit{ display: none !important; }
/* biar kolom2 di baris editor bisa menyusut tanpa overflow */
#back .modal .row .col{ 
  flex: 1 1 0; 
  min-width: 0;        /* penting: izinkan shrink */
}
#back .modal{ width: 100% !important; }
/* kalau masih agak mepet, kecilkan gap sedikit */
#back .modal .row .col{ flex: 1 1 0; min-width: 0; }
#back .modal .row .col input,
#back .modal .row .col select{ width:100%; }
#inc{ flex: 0 0 auto !important; padding:10px 12px; }
#back .modal .row{ gap:8px; }
@media (max-width: 900px){
  #back{ position: static; width:auto; }
  .layout{ display:block; }
  .card{ max-width:100%; }
}
.page{
  max-width: 1040px;            /* boleh 920–1000, sesuaikan layar */
  margin: 24px auto 56px;
  padding: 0 18px;
}

/* Dua kolom yang dicenter */
.layout{
  display: grid !important;
  grid-template-columns: 420px 510px; /* kiri=editor, kanan=resit */
  gap: 12px;                           /* kecilkan kalau mau lebih “nempel” */
  justify-content: center;             /* pasangan dicenter */
  align-items: start;
}

/* Editor jadi kolom kiri (bukan overlay/fixed) */
#back{
  position: static !important;
  inset: auto !important;              /* netralisir inset:0 lama */
  display: block !important;
  background: transparent !important;
  width: auto !important;
  z-index: 1;
}

/* Panel editor isi penuh kolom kiri, boleh sticky di atas */
#back .modal{
  width: 100% !important;
  position: sticky;
  top: 12px;
  box-shadow: 0 10px 26px rgba(0,0,0,.08);
  border-radius: 14px;
  max-height: none;
  overflow: visible;
}

/* Resit di kolom kanan, lebar tetap */
.card{
  width: 510px;
  max-width: 510px;
  margin: 0 !important;      /* jangan auto-center sendiri; mengikuti grid */
  flex: initial !important;
}

/* Pastikan field editor tidak meluber */
#back .modal .row .col{ flex: 1 1 0; min-width: 0; }
#back .modal .row .col input,
#back .modal .row .col select{ width:100%; }
#inc{ flex: 0 0 auto !important; padding:10px 12px; }
#back .modal .row{ gap:8px; }

/* Responsif: tumpuk saat layar kecil */
@media (max-width: 900px){
  .layout{ grid-template-columns: 1fr; }
  #back .modal{ position: static; }
  .card{ width: 100%; max-width: 100%; }
}
</style>
</head>
<body>
  <div class="page">
    <div class="topcap"></div>

    <div class="hdr">
      <div class="title">Transaction Summary</div>
      <div class="fav">Save as favourite <span class="star">☆</span></div>
    </div>

    <!-- ===== NEW: layout 2 kolom ===== -->
    <div class="layout">
      <!-- KIRI: Editor selalu tampil -->
      <div class="back" id="back">
        <div class="modal" role="document" aria-label="Editor">
          <h3>Edit Transaction</h3>

          <div class="fld">
            <label>Amount (RM)</label>
            <input id="inAmount" type="number" step="0.01" value="50.00">
          </div>

          <div class="row">
            <div class="col fld">
              <label>Date &amp; Time</label>
              <input id="inDate" type="datetime-local">
            </div>
            <div class="col fld">
              <label>Reference prefix</label>
              <div class="row">
                <input id="inPrefix" type="text" value="251002194" class="col">
                <button class="btn" id="inc" style="padding:10px 12px;min-width:30px">+1</button>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col fld">
              <label>Total ref length</label>
              <select id="inLen">
                <option>20</option><option selected>24</option><option>28</option><option>32</option>
              </select>
            </div>
            <div class="col fld">
              <label>Force Bank (optional)</label>
              <select id="inBank">
                <option value="">Select Bank</option>
                <option>Maybank</option>
                <option>CIMB Bank</option>
                <option>RHB</option>
                <option>Public</option>
                <option>HLB</option>
                <option>Bank Simpanan Nasional</option>
              </select>
            </div>
          </div>

          <div class="fld">
            <label>Recipient Full Name</label>
            <input id="inName" type="text" value="BAHARUDEEN BIN ABDUL">
            <div style="color:var(--muted);font-size:13px">Saat Update, data sensitif akan otomatis di-blur; hanya huruf awal nama yang tampak.</div>
          </div>

          <div class="ctl">
            <button class="btn" id="close">Cancel</button>
            <button class="btn primary" id="apply">Update &amp; Blur</button>
          </div>
        </div>
      </div>

      <!-- KANAN: Card -->
      <div class="card" id="card">
        <!-- HAPUS tombol gear -->
        <div class="row-top">
          <div class="left">
            <div><span class="type">Fund Transfer</span><span class="badge"><span>Success</span></span></div>

            <!-- Kiri: ref & tanggal saja -->
            <div class="refblock">
              <div class="ref-left">Reference Number: <span id="refNum">251002170720267593224</span></div>
              <div class="ref-date" id="dateText">02 Oct 2025 05:07:21 PM</div>
            </div>
          </div>

          <!-- Kanan: amount + View Receipt di bawahnya -->
          <div class="right-col">
            <div class="amount"><span class="rm" id="amt">RM 50.00</span></div>
            <a href="#" class="view-receipt">View Receipt</a>
          </div>
        </div>

        <hr>

        <div>
          <div class="sect">Recipient Details</div>
          <div class="detail">
            <div><span class="initial" id="nmIni">B</span><span id="nmRest">AHARUDEEN BIN ABDUL</span></div>
            <div id="bankName">Maybank</div>
            <div class="sub" id="accNum">164548072822</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="sect">Transfer Mode</div>
          <div class="detail sub">DuitNow</div>
        </div>

        <div class="more">View More <span>▾</span></div>

        <div class="actions">
          <button class="btn">Another Transfer</button>
          <button class="btn primary">Done</button>
        </div>
      </div>
    </div>
    <!-- ===== end layout ===== -->

  </div>

<script>
  /* ======== DATA BANK (panjang no. akun) ======== */
  const BANKS = [
    {name:'Maybank', len:12},
    {name:'CIMB Bank',len:10},
    {name:'RHB',     len:12},
    {name:'Public',  len:14},
    {name:'Bank Simpanan Nasional',     len:16},
    {name:'HLB',     len:12}, // Hong Leong
  ];

  /* ======== EL ======== */
  const back = document.getElementById('back');
  const open = document.getElementById('open');
  const closeBtn = document.getElementById('close');
  const apply = document.getElementById('apply');
  const inc = document.getElementById('inc');

  const refNum = document.getElementById('refNum');
  const dateText = document.getElementById('dateText');
  const amt = document.getElementById('amt');
  const nmIni = document.getElementById('nmIni');
  const nmRest = document.getElementById('nmRest');
  const bankName = document.getElementById('bankName');
  const accNum = document.getElementById('accNum');

  const inAmount = document.getElementById('inAmount');
  const inDate = document.getElementById('inDate');
  const inPrefix = document.getElementById('inPrefix');
  const inLen = document.getElementById('inLen');
  const inBank = document.getElementById('inBank');
  const inName = document.getElementById('inName');

  /* ======== HELPERS ======== */
  const pad2 = n => String(n).padStart(2,'0');
  const randi = (a,b) => Math.floor(Math.random()*(b-a+1))+a;
  const digits = n => Array.from({length:n},()=>String(randi(0,9))).join('');
  const pickBank = forced => forced ? BANKS.find(b=>b.name===forced) : BANKS[randi(0,BANKS.length-1)];
  const splitName = name => {
    const s = (name||'').trim().toUpperCase();
    if(!s) return {i:'—', r:''};
    return {i:s[0], r:s.slice(1)};
  };
  function toCardDate(localVal){
    if(!localVal) return '02 Oct 2025 05:07:21 PM';
    let v = localVal;
    if(v.length===16) v += ':00';
    const [d,t] = v.split('T');
    const [Y,M,D] = d.split('-').map(Number);
    const [h,m,s] = t.split(':').map(Number);
    const dt = new Date(Y,M-1,D,h||0,m||0,s||0);
    const mon = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()];
    let hh = dt.getHours(); const ap = hh>=12?'PM':'AM'; hh = hh%12 || 12;
    return `${pad2(dt.getDate())} ${mon} ${dt.getFullYear()} ${pad2(hh)}:${pad2(dt.getMinutes())}:${pad2(dt.getSeconds())} ${ap}`;
  }
  function buildRef(prefix,len){
    prefix = String(prefix||'2510');
    const remain = Math.max(0, Number(len||24) - prefix.length);
    return prefix + digits(remain);
  }



  /* ======== PREFIX +1 ======== */
  inc.addEventListener('click', e=>{
    e.preventDefault();
    let cur = parseInt(inPrefix.value||'2510',10);
    if(Number.isNaN(cur)) cur = 2510;
    inPrefix.value = String(cur + 1);
  });

  /* ======== INITIAL STATE ======== */
  window.addEventListener('load', ()=>{
    inDate.value = '2025-10-02T17:07:21';
  });

  /* ======== APPLY & BLUR ======== */
  apply.addEventListener('click', e=>{
    e.preventDefault();

    // amount
    const amount = parseFloat(inAmount.value||0).toFixed(2);
    amt.textContent = `RM ${amount}`;

    // datetime
    dateText.textContent = toCardDate(inDate.value);

    // reference
    refNum.textContent = buildRef(inPrefix.value, inLen.value);

    // bank & account
    const bank = pickBank(inBank.value || '');
    bankName.textContent = bank.name;
    accNum.textContent = digits(bank.len);

    // name
    const {i,r} = splitName(inName.value || 'BAHARUDEEN BIN ABDUL');
    nmIni.textContent = i;
    nmRest.textContent = r;

    // BLUR SENSITIF
    [nmRest, accNum, refNum].forEach(el=> el.classList.add('blurred'));
    amt.classList.remove('blurred');
    dateText.classList.remove('blurred');
  });
</script>
</body>
</html>
