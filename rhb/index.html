<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Payment Preview • Blur Mask</title>

<!-- Google Font: Lato -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#fff;
    --card:#edf1f6;
    --line:#e8edf4;
    --label:rgb(139,148,160);
    --text:rgb(66,75,87);
    --radius:10px;
  }
  *{box-sizing:border-box}
  html,body{margin:0}
  body{
    font-family:'Lato',system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    padding:24px;
  }

  .wrap{max-width:820px;margin:0 auto;display:grid;gap:18px}
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:3px;
    box-shadow:0 1px 1px rgba(0,0,0,.02);
  }

  /* ---------- Form ---------- */
  .form{
    padding:16px;
    display:grid;
    grid-template-columns: repeat(12, 1fr);
    gap:12px 14px;
    background:#5bc2e7;
  }
  .form h2{
    grid-column:1 / -1;
    font-size:16px;font-weight:700;color:#0050a1;letter-spacing:.02em;
    margin:2px 0 6px;text-transform:uppercase;
  }
  .fld{grid-column: span 6; min-width:0}
  .fld.w12{grid-column: 1 / -1}

  .row-inline{
    display:flex;gap:8px;align-items:center;
  }
  .lbl{
    display:block;font-size:14px;color:#fff;margin:2px 0 6px;
  }
  .inp,.sel,.btn,.mini{
    height:40px;border:1px solid var(--line);background:#f9fbff;color:var(--text);
    border-radius:8px;padding:0 12px;font-size:14px;outline:none;
  }
  .inp,.sel{width:100%}
  .inp:focus,.sel:focus{border-color:#d7deea;box-shadow:0 0 0 3px rgba(58,123,213,.08);background:#fff}
  .btn{
    width:100%;background:#eef3fb;border-color:#dfe6f2;font-weight:600;cursor:pointer;
  }
  .btn:hover{filter:brightness(.98)}
  .btn:active{transform:translateY(1px)}

  /* mini toggles */
  .mini{
    cursor:pointer;white-space:nowrap;font-weight:600;
    padding:0 10px;border-radius:8px;background:#eff6ff;border-color:#d4e2ff;
  }
  .mini.active{background:#276ef1;color:#fff;border-color:#276ef1}

  /* ---------- Preview (meniru gambar) ---------- */
  .preview{padding:0;overflow:hidden}
  .row{
    display:flex;align-items:center;
    padding:18px 18px;gap:10px;
    border-bottom:1.5px solid #ffffff;margin-bottom:15px;
  }
  /* baris Bank/Payment Type tanpa border bawah seperti gambar */
  .preview .row:nth-child(2){border-bottom:none}
  .row:last-child{border-bottom:none}

  .to-label{font-size:12px;color:var(--label);margin-bottom:2px}
  .to-line{font-size:15px;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .dot{padding:0 8px;color:#253041}

  .cols{display:grid;grid-template-columns:1fr 1fr;gap:28px;width:100%}
  .kv .k{font-size:14px;color:var(--label);margin-bottom:3px}
  .kv .v{font-size:16px;color:var(--text)}

  /* efek blur sensor */
  .blur{filter:blur(5px);opacity:.85;border-radius:6px;padding:0 .15em;display:inline-block}

  @media (max-width:640px){
    .fld{grid-column: span 12}
    .cols{grid-template-columns: 1fr}
    .row{padding:16px 14px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <!-- Form -->
    <div class="card form" id="form">
      <h2>RHB BANK</h2>

      <div class="fld">
        <label class="lbl">To (Recipient Name)</label>
        <div class="row-inline">
          <input class="inp" id="toName" placeholder="CHAN YUE YENG" value="CHAN YUE YENG">
          <button type="button" class="mini" id="autoNameBtn">Auto A–Z</button>
        </div>
      </div>

      <div class="fld">
        <label class="lbl">Recipient Account / ID</label>
        <div class="row-inline">
          <input class="inp" id="toId" placeholder="1-7157-134469-8" value="1-7157-134469-8">
          <button type="button" class="mini" id="autoAccBtn">Auto No.</button>
        </div>
      </div>

      <div class="fld">
        <label class="lbl">Bank</label>
        <div class="row-inline">
          <select class="sel" id="bankSel">
            <option>Touch N Go Digital</option>
            <option>Maybank</option>
            <option>CIMB</option>
            <option>RHB Bank</option>
            <option>Public Bank</option>
            <option>Hong Leong Bank</option>
            <option>Bank Islam</option>
            <option>Bank Simpanan Nasional</option>
            <option>AmBank</option>
            <option>OCBC Bank</option>
            <option>UOB Bank</option>
          </select>
          <button type="button" class="mini" id="autoBankBtn">Auto Bank</button>
        </div>
      </div>

      <div class="fld">
        <label class="lbl">Payment Type</label>
        <input class="inp" id="payType" value="Fund Transfer">
      </div>

      <div class="fld">
        <label class="lbl">Amount (MYR)</label>
        <input class="inp" id="amount" inputmode="decimal" placeholder="2550" value="2550">
      </div>

      <div class="fld">
        <label class="lbl">Recipient Reference</label>
        <input class="inp" id="reference" value="Payment" placeholder="Payment">
      </div>

      <div class="fld w12">
        <button class="btn" id="createBtn">Create</button>
      </div>
    </div>

    <!-- Preview -->
    <div class="card preview" id="preview">
      <!-- Row: To -->
      <div class="row">
        <div>
          <div class="to-label">To</div>
          <div class="to-line" id="toLine"></div>
        </div>
      </div>

      <!-- Row: Bank / Payment Type -->
      <div class="row">
        <div class="cols" style="margin-top:2px">
          <div class="kv">
            <div class="k">Bank</div>
            <div class="v" id="vBank">Touch N Go Digital</div>
          </div>
          <div class="kv">
            <div class="k">Payment Type</div>
            <div class="v" id="vType">Fund Transfer</div>
          </div>
        </div>
      </div>

      <!-- Row: Amount / Reference -->
      <div class="row">
        <div class="cols">
          <div class="kv">
            <div class="k">Amount</div>
            <div class="v" id="vAmount">MYR 0.00</div>
          </div>
          <div class="kv">
            <div class="k">Recipient Reference</div>
            <div class="v" id="vRef">Payment</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  const $ = s => document.querySelector(s);

  const el = {
    toName:    $('#toName'),
    toId:      $('#toId'),
    bankSel:   $('#bankSel'),
    payType:   $('#payType'),
    amount:    $('#amount'),
    ref:       $('#reference'),
    toLine:    $('#toLine'),
    vBank:     $('#vBank'),
    vType:     $('#vType'),
    vAmount:   $('#vAmount'),
    vRef:      $('#vRef'),
    createBtn: $('#createBtn'),
    autoNameBtn: $('#autoNameBtn'),
    autoBankBtn: $('#autoBankBtn'),
    autoAccBtn:  $('#autoAccBtn'),
  };

  /* ======================
     Random helpers
  ====================== */
  const BANK_FORMATS = {
    "Touch N Go Digital": [1,4,6,1],   // contoh 1-7157-134469-8
    "Maybank":            [4,4,4],     // 12 digit
    "CIMB":               [10],        // 10 digit
    "RHB Bank":           [3,7,2],     // 12 digit
    "Public Bank":        [12],
    "Hong Leong Bank":    [3,6,3],
    "Bank Islam":         [10],
    "Bank Simpanan Nasional": [4,6,2],
    "AmBank":             [12],
    "OCBC Bank":          [12],
    "UOB Bank":           [12],
  };

  const pick = arr => arr[Math.floor(Math.random()*arr.length)];
  const randDigit = () => Math.floor(Math.random()*10);
  const randInt = (a,b) => a + Math.floor(Math.random()*(b-a+1));

  function genAccount(bank){
    const groups = BANK_FORMATS[bank] || [12];
    let out = '';
    groups.forEach((g,i)=>{
      for(let j=0;j<g;j++) out += randDigit();
      if(i<groups.length-1) out += '-';
    });
    return out;
  }

  function genNameAZ(){
    const word = len => Array.from({length:len},()=>String.fromCharCode(65+randInt(0,25))).join('');
    // 2 kata, panjang 3-8 huruf
    return `${word(randInt(3,8))} ${word(randInt(3,8))}`;
  }

  /* ======================
     Format & Mask
  ====================== */
  function fmtMYR(val){
    let num = Number(String(val).replace(/[^\d.]/g,''));
    if (!isFinite(num)) num = 0;
    return 'MYR ' + num.toLocaleString('en-MY',{minimumFractionDigits:2,maximumFractionDigits:2});
  }

  // Tampilkan hanya 2 digit terakhir, karakter '-' tetap
  function maskAccountKeepDashes(str){
    if (!str) return '';
    const raw = String(str);
    const digits = raw.replace(/\D/g,'');
    let seenDigits = 0, out = '';
    for (const ch of raw){
      if (/\d/.test(ch)){
        seenDigits++;
        const isLastTwo = seenDigits > (digits.length - 2);
        out += isLastTwo ? ch : `<span class="blur">${ch}</span>`;
      } else {
        out += ch; // biarkan '-' atau spasi
      }
    }
    return out;
  }

  // Nama: tampilkan 2 huruf depan, sisanya blur (spasi dibiarkan)
  function maskNameFirst2(name){
    if (!name) return '';
    const s = String(name).trim().toUpperCase();
    let masked = s.slice(0,2);
    for (const ch of s.slice(2)){
      masked += (ch===' ') ? ch : `<span class="blur">${ch}</span>`;
    }
    return masked;
  }

  /* ======================
     Render
  ====================== */
  function render(){
    const nameFrag = maskNameFirst2(el.toName.value);
    const idFrag   = maskAccountKeepDashes(el.toId.value);
    el.toLine.innerHTML = `${nameFrag}<span class="dot">•</span>${idFrag}`;

    el.vBank.textContent   = el.bankSel.value || '';
    el.vType.textContent   = el.payType.value || '';
    el.vAmount.textContent = fmtMYR(el.amount.value);
    el.vRef.textContent    = el.ref.value || '';
  }

  // Amount neat on blur (keep raw number in input)
  el.amount.addEventListener('blur', e=>{
    e.target.value = String(Number(String(e.target.value).replace(/[^\d.]/g,''))||0);
  });

  /* ======================
     Toggles
  ====================== */
  let autoName=false, autoBank=false, autoAcc=false;

  function toggle(btn,flagName){
    window[flagName] = !window[flagName];
    btn.classList.toggle('active', window[flagName]);
  }

  el.autoNameBtn.addEventListener('click', ()=> toggle(el.autoNameBtn,'autoName'));
  el.autoBankBtn.addEventListener('click', ()=> toggle(el.autoBankBtn,'autoBank'));
  el.autoAccBtn .addEventListener('click', ()=> toggle(el.autoAccBtn ,'autoAcc'));

  // Jika user ganti bank manual & Auto No aktif → regen no. ikut bank baru
  el.bankSel.addEventListener('change', ()=>{
    if (autoAcc){
      el.toId.value = genAccount(el.bankSel.value);
    }
  });

  // Action utama
  el.createBtn.addEventListener('click', ()=>{
    if (autoName) el.toName.value = genNameAZ();
    if (autoBank) el.bankSel.value = pick([...el.bankSel.options].map(o=>o.value));
    if (autoAcc)  el.toId.value = genAccount(el.bankSel.value);
    render();
  });

  // Render awal
  render();
</script>
</body>
</html>
